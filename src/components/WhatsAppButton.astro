---
// src/components/WhatsAppButton.astro

interface Props {    
    phone: string | number;
    label?: string;        
    message?: string;    
}

const { phone: rawPhone, label = "Contactar", message = "" } = Astro.props;

const basePhone = String(rawPhone || '');
const cleanPhone = basePhone.replace(/\D/g, ''); 

const encodedMessage = message ? `?text=${encodeURIComponent(message)}` : '';
const whatsappUrl = `https://wa.me/${cleanPhone}${encodedMessage}`;

// ðŸ”‘ CORRECCIÃ“N: Definimos la ruta como una constante, no como el elemento a renderizar.
const IconPath = '/whatsapp.svg'; 
   
---

<a     
    href={whatsappUrl}
    target="_blank"     
    rel="noopener noreferrer"
    
    class="inline-flex items-center justify-center rounded-full bg-green-500 px-6 py-3 text-base font-semibold text-white shadow-lg transition-colors 
           hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 focus:ring-opacity-50 w-full md:w-auto"
>
    
    <img src={IconPath} alt="WhatsApp Icon" class="w-5 h-5 mr-2" />
    
    {label}
</a>